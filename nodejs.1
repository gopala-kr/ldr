<!DOCTYPE html>
<html xmlns:cc="http://creativecommons.org/ns#">
   <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# medium-com: http://ogp.me/ns/fb/medium-com#">
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>What you should know to really understand the Node.js Event Loop</title>
      <link rel="canonical" href="https://medium.com/the-node-js-collection/what-you-should-know-to-really-understand-the-node-js-event-loop-and-its-metrics-c4907b19da4c">
      <meta name="title" content="What you should know to really understand the Node.js Event Loop">
      <meta name="referrer" content="unsafe-url">
      <meta name="description" content="Node.js is an event-based platform. This means that everything that happens in Node is the reaction to an event. A transaction passing through Node traverses a cascade of callbacks.
         Abstracted away…">
      <meta name="theme-color" content="#000000">
      <meta property="og:title" content="What you should know to really understand the Node.js Event Loop">
      <meta property="og:url" content="https://medium.com/the-node-js-collection/what-you-should-know-to-really-understand-the-node-js-event-loop-and-its-metrics-c4907b19da4c">
      <meta property="og:image" content="https://cdn-images-1.medium.com/max/1200/1*ROxiavz7LeRpIfcgRDE7CA.png">
      <meta property="fb:app_id" content="542599432471018">
      <meta property="og:description" content="Node.js is an event-based platform. This means that everything that happens in Node is the reaction to an event. A transaction passing…">
      <meta name="twitter:description" content="Node.js is an event-based platform. This means that everything that happens in Node is the reaction to an event. A transaction passing…">
      <meta name="twitter:image:src" content="https://cdn-images-1.medium.com/max/1200/1*ROxiavz7LeRpIfcgRDE7CA.png">
      <link rel="publisher" href="https://plus.google.com/103654360130207659246">
      <link rel="author" href="https://medium.com/@dkhan">
      <meta property="author" content="Daniel Khan">
      <meta property="og:type" content="article">
      <meta name="twitter:card" content="summary_large_image">
      <meta property="article:publisher" content="https://www.facebook.com/medium">
      <meta property="article:author" content="https://medium.com/@dkhan">
      <meta name="robots" content="index, follow">
      <meta property="article:published_time" content="2017-07-20T14:46:34.482Z">
      <meta name="twitter:creator" content="@dkhan">
      <meta name="twitter:site" content="@Medium">
      <meta property="og:site_name" content="Medium">
      <meta name="twitter:label1" value="Reading time">
      <meta name="twitter:data1" value="8 min read">
      <meta name="twitter:app:name:iphone" content="Medium">
      <meta name="twitter:app:id:iphone" content="828256236">
      <meta name="twitter:app:url:iphone" content="medium://p/c4907b19da4c">
      <meta property="al:ios:app_name" content="Medium">
      <meta property="al:ios:app_store_id" content="828256236">
      <meta property="al:android:package" content="com.medium.reader">
      <meta property="al:android:app_name" content="Medium">
      <meta property="al:ios:url" content="medium://p/c4907b19da4c">
      <meta property="al:android:url" content="medium://p/c4907b19da4c">
      <meta property="al:web:url" content="https://medium.com/the-node-js-collection/what-you-should-know-to-really-understand-the-node-js-event-loop-and-its-metrics-c4907b19da4c">
      <link rel="search" type="application/opensearchdescription+xml" title="Medium" href="/osd.xml" />
      <link rel="alternate" href="android-app://com.medium.reader/https/medium.com/p/c4907b19da4c" />
      <script type="application/ld+json">{"@context":"http://schema.org","@type":"NewsArticle","image":{"@type":"ImageObject","width":1227,"height":644,"url":"https://cdn-images-1.medium.com/max/1350/1*ROxiavz7LeRpIfcgRDE7CA.png"},"datePublished":"2017-07-20T14:46:34.482Z","dateModified":"2017-10-21T05:36:01.010Z","headline":"What you should know to really understand the Node.js Event Loop","name":"What you should know to really understand the Node.js Event Loop","keywords":["Nodejs","Performance Management","Monitoring","Performance"],"author":{"@type":"Person","name":"Daniel Khan","url":"https://medium.com/@dkhan"},"creator":["Daniel Khan"],"publisher":{"@type":"Organization","name":"Node.js Collection","url":"https://medium.com/the-node-js-collection","logo":{"@type":"ImageObject","width":215,"height":60,"url":"https://cdn-images-1.medium.com/max/237/1*5ztbgEt4NqpVaxTc64C-XA.png"}},"mainEntityOfPage":"https://medium.com/the-node-js-collection/what-you-should-know-to-really-understand-the-node-js-event-loop-and-its-metrics-c4907b19da4c"}</script>
      <link rel="stylesheet" type="text/css" href="https://glyph.medium.com/css/e/sr/latin/e/ssr/latin/e/ssb/latin/m2.css" />
      <link rel="stylesheet" href="https://cdn-static-1.medium.com/_/fp/css/main-branding-base.MTufrA3mvOR4Vo3R6Tv4bQ.css">
      <script>if (window.top !== window.self) window.top.location = window.self.location.href;var OB_startTime = new Date().getTime(); var OB_loadErrors = []; function _onerror(e) { OB_loadErrors.push(e) }; if (document.addEventListener) document.addEventListener("error", _onerror, true); else if (document.attachEvent) document.attachEvent("onerror", _onerror); function _asyncScript(u) {var d = document, f = d.getElementsByTagName("script")[0], s = d.createElement("script"); s.type = "text/javascript"; s.async = true; s.src = u; f.parentNode.insertBefore(s, f);}function _asyncStyles(u) {var d = document, f = d.getElementsByTagName("script")[0], s = d.createElement("link"); s.rel = "stylesheet"; s.href = u; f.parentNode.insertBefore(s, f); return s}(new Image()).src = "/_/stat?event=pixel.load&origin=" + encodeURIComponent(location.origin);</script><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date; ga("create", "UA-24232453-2", "auto", {"allowLinker": true, "legacyCookieDomain": window.location.hostname}); ga("send", "pageview");</script><script async src="https://www.google-analytics.com/analytics.js"></script><!--[if lt IE 9]><script charset="UTF-8" src="https://cdn-static-1.medium.com/_/fp/js/shiv.RI2ePTZ5gFmMgLzG5bEVAA.js"></script><![endif]-->
      <link rel="icon" href="https://cdn-static-1.medium.com/_/fp/icons/favicon-rebrand-medium.3Y6xpZ-0FSdWDnPM3hSBIA.ico" class="js-favicon">
      <link rel="apple-touch-icon" sizes="152x152" href="https://cdn-images-1.medium.com/fit/c/167/167/1*tfZa4vsI6UusJYt_fzvGnQ.png">
      <link rel="apple-touch-icon" sizes="120x120" href="https://cdn-images-1.medium.com/fit/c/132/132/1*tfZa4vsI6UusJYt_fzvGnQ.png">
      <link rel="apple-touch-icon" sizes="76x76" href="https://cdn-images-1.medium.com/fit/c/84/84/1*tfZa4vsI6UusJYt_fzvGnQ.png">
      <link rel="apple-touch-icon" sizes="60x60" href="https://cdn-images-1.medium.com/fit/c/66/66/1*tfZa4vsI6UusJYt_fzvGnQ.png">
      <link rel="mask-icon" href="https://cdn-static-1.medium.com/_/fp/icons/monogram-mask.KPLCSFEZviQN0jQ7veN2RQ.svg" color="#171717">
   </head>
   <body itemscope class=" postShowScreen browser-chrome os-windows is-withMagicUnderlines v-glyph v-glyph--m2 v-enableBrandingButtons is-noJs">
      <script>document.body.className = document.body.className.replace(/(^|\s)is-noJs(\s|$)/, "$1is-js$2")</script>
      <div class="site-main" id="container">
         <div class="butterBar butterBar--error"></div>
         <div class="surface">
            <div id="prerendered" class="screenContent">
               <canvas class="canvas-renderer"></canvas>
               <div class="container u-maxWidth740 u-xs-margin0 notesPositionContainer js-notesPositionContainer"></div>
               <div class="metabar u-clearfix js-metabar u-boxShadowBottomThinLighter u-fixed u-backgroundTransparentWhiteDarkest u-xs-sizeFullViewportWidth">
                  <div class="metabar-inner u-marginAuto u-maxWidth1000 u-flexCenter u-justifyContentSpaceBetween u-paddingLeft20 u-paddingRight20 u-height65 u-xs-height56 js-metabarMiddle">
                     <div class="metabar-block u-flex1 u-flexCenter">
                        <div class="js-metabarLogoLeft">
                           <a href="https://medium.com/" data-log-event="home" class="siteNav-logo u-flexCenter u-paddingTop0">
                              <span class="svgIcon svgIcon--logoMonogram svgIcon--45px is-flushLeft u-textColorDarker">
                                 <svg class="svgIcon-use" width="45" height="45" viewBox="0 0 45 45" >
                                    <path d="M5 40V5h35v35H5zm8.56-12.627c0 .555-.027.687-.318 1.03l-2.457 2.985v.396h6.974v-.396l-2.456-2.985c-.291-.343-.344-.502-.344-1.03V18.42l6.127 13.364h.714l5.256-13.364v10.644c0 .29 0 .342-.185.528l-1.848 1.796v.396h9.19v-.396l-1.822-1.796c-.184-.186-.21-.238-.21-.528V15.937c0-.291.026-.344.21-.528l1.823-1.797v-.396h-6.471l-4.622 11.542-5.203-11.542h-6.79v.396l2.14 2.64c.239.292.291.37.291.768v10.353z"/>
                                 </svg>
                              </span>
                              <span class="u-textScreenReader">Homepage</span>
                           </a>
                        </div>
                        <div class="u-alignMiddle u-inlineBlock u-verticalAlignTop u-height65 u-xs-height56">
                           <div class="u-alignBlock"><span class="u-inlineBlock u-height28 u-xs-height24 u-verticalAlignTop u-marginRight20 u-marginLeft15 u-borderRightLighter"></span></div>
                        </div>
                        <div class="u-alignMiddle u-inlineBlock u-verticalAlignTop u-height65 u-xs-height56 u-marginRight18">
                           <div class="u-alignBlock"><a class="js-collectionLogoOrName" href="https://medium.com/the-node-js-collection?source=logo-lo_kMSBWgKE1ksS---c80fd9f96957"><span class="u-inlineBlock u-uiTextBold u-fontSize18 u-lineHeight18 u-xs-fontSize22 u-xs-lineHeight22 u-xs-noWrapWithEllipsis u-xs-maxWidth200 u-textColorDark">Node.js Collection</span></a></div>
                        </div>
                        <div class="u-alignMiddle u-inlineBlock u-verticalAlignTop u-height65 u-xs-height56 u-xs-hide">
                           <div class="u-alignBlock">
                              <div class="buttonSet">
                                 <button class="button button--primary button--smallest u-noUserSelect button--withChrome u-accentColor--buttonNormal js-relationshipButton is-smallPill"  data-action="sign-up-prompt" data-sign-in-action="toggle-follow-collection" data-requires-token="true" data-redirect="https://medium.com/_/subscribe/collection/the-node-js-collection" data-action-source="----c80fd9f96957----------------------follow_header" data-collection-id="c80fd9f96957"><span class="button-label  js-buttonLabel">Follow</span></button>
                                 <a class="button button--chromeless is-touchIconBlackPulse u-baseColor--buttonNormal button--withIcon button--withSvgIcon"   href="https://twitter.com/nodejs" title="Visit “Node.js Collection” on Twitter" aria-label="Visit “Node.js Collection” on Twitter" rel="me" target="_blank">
                                    <span class="button-defaultState">
                                       <span class="svgIcon svgIcon--twitterFilled svgIcon--25px">
                                          <svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25" >
                                             <path d="M21.725 5.338c-.744.47-1.605.804-2.513 1.006a3.978 3.978 0 0 0-2.942-1.293c-2.22 0-4.02 1.81-4.02 4.02 0 .32.034.63.07.94-3.31-.18-6.27-1.78-8.255-4.23a4.544 4.544 0 0 0-.574 2.01c.04 1.43.74 2.66 1.8 3.38-.63-.01-1.25-.19-1.79-.5v.08c0 1.93 1.38 3.56 3.23 3.95-.34.07-.7.12-1.07.14-.25-.02-.5-.04-.72-.07.49 1.58 1.97 2.74 3.74 2.8a8.49 8.49 0 0 1-5.02 1.72c-.3-.03-.62-.04-.93-.07A11.447 11.447 0 0 0 8.88 21c7.386 0 11.43-6.13 11.414-11.414.015-.21.01-.38 0-.578a7.604 7.604 0 0 0 2.01-2.08 7.27 7.27 0 0 1-2.297.645 3.856 3.856 0 0 0 1.72-2.23"/>
                                          </svg>
                                       </span>
                                    </span>
                                 </a>
                                 <a class="button button--chromeless is-touchIconBlackPulse u-baseColor--buttonNormal button--withIcon button--withSvgIcon u-paddingLeft0"   href="//facebook.com/nodejsfoundation" title="Visit “Node.js Collection” on Facebook" aria-label="Visit “Node.js Collection” on Facebook" rel="me" target="_blank">
                                    <span class="button-defaultState">
                                       <span class="svgIcon svgIcon--facebookFilled svgIcon--25px">
                                          <svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25" >
                                             <path d="M21 12.646C21 7.65 16.97 3.6 12 3.6s-9 4.05-9 9.046a9.026 9.026 0 0 0 7.59 8.924v-6.376H8.395V12.64h2.193v-1.88c0-2.186 1.328-3.375 3.267-3.375.93 0 1.728.07 1.96.1V9.77H14.47c-1.055 0-1.26.503-1.26 1.242v1.63h2.517l-.33 2.554H13.21V21.6c4.398-.597 7.79-4.373 7.79-8.954"/>
                                          </svg>
                                       </span>
                                    </span>
                                 </a>
                              </div>
                           </div>
                        </div>
                     </div>
                     <div class="metabar-block u-flex0 u-flexCenter">
                        <div class="u-alignMiddle u-inlineBlock u-verticalAlignTop u-height65 u-xs-height56">
                           <div class="u-alignBlock">
                              <div class="buttonSet buttonSet--wide u-lineHeightInherit"><a class="button button--primary button--chromeless u-accentColor--buttonNormal is-inSiteNavBar js-signUpButton"   href="https://medium.com/m/signin?redirect=https%3A%2F%2Fmedium.com%2Fthe-node-js-collection%2Fwhat-you-should-know-to-really-understand-the-node-js-event-loop-and-its-metrics-c4907b19da4c&amp;source=--------------------------nav_reg&amp;operation=register">Sign in / Sign up</a></div>
                           </div>
                        </div>
                     </div>
                     <div class="u-absolute u-sizeFullWidth u-top0 u-right0 u-textAlignCenter js-metabarLogoCentered u-hide">
                        <a href="https://medium.com/" data-log-event="home" class="siteNav-logo u-flexCenter u-paddingTop0">
                           <span class="svgIcon svgIcon--logoMonogram svgIcon--45px is-flushLeft u-textColorDarker">
                              <svg class="svgIcon-use" width="45" height="45" viewBox="0 0 45 45" >
                                 <path d="M5 40V5h35v35H5zm8.56-12.627c0 .555-.027.687-.318 1.03l-2.457 2.985v.396h6.974v-.396l-2.456-2.985c-.291-.343-.344-.502-.344-1.03V18.42l6.127 13.364h.714l5.256-13.364v10.644c0 .29 0 .342-.185.528l-1.848 1.796v.396h9.19v-.396l-1.822-1.796c-.184-.186-.21-.238-.21-.528V15.937c0-.291.026-.344.21-.528l1.823-1.797v-.396h-6.471l-4.622 11.542-5.203-11.542h-6.79v.396l2.14 2.64c.239.292.291.37.291.768v10.353z"/>
                              </svg>
                           </span>
                           <span class="u-textScreenReader">Homepage</span>
                        </a>
                     </div>
                  </div>
                  <div class="metabar-inner u-marginAuto u-maxWidth1000 js-metabarBottom">
                     <nav role="navigation" class="metabar-block metabar-block--below u-overflowHiddenY u-height40">
                        <ul class="u-textAlignLeft u-noWrap u-overflowX u-paddingBottom100 u-sm-paddingLeft20 u-sm-paddingRight20 js-collectionNavItems">
                           <li class="metabar-navItem js-collectionNavItem u-uiTextMedium u-fontSize14 u-inlineBlock u-textUppercase u-letterSpacing003 u-textColorNormal u-xs-paddingRight12 u-xs-marginRight0 u-paddingTop5 u-xs-paddingTop10"><a class="link link--darken u-accentColor--textDarken js-homeNav u-baseColor--link"   href="https://medium.com/the-node-js-collection">Home</a></li>
                           <li class="metabar-navItem js-collectionNavItem  u-uiTextMedium u-fontSize14 u-inlineBlock u-textUppercase u-letterSpacing003 u-textColorNormal u-xs-paddingRight12 u-xs-marginRight0 u-paddingTop5 u-xs-paddingTop10"><a class="link link--darken u-accentColor--textDarken link--noUnderline js-navItemLink u-baseColor--link"   href="https://medium.com/the-node-js-collection/tagged/open-source">Community</a></li>
                           <li class="metabar-navItem js-collectionNavItem  u-uiTextMedium u-fontSize14 u-inlineBlock u-textUppercase u-letterSpacing003 u-textColorNormal u-xs-paddingRight12 u-xs-marginRight0 u-paddingTop5 u-xs-paddingTop10"><a class="link link--darken u-accentColor--textDarken link--noUnderline js-navItemLink u-baseColor--link"   href="https://medium.com/the-node-js-collection/tagged/technology">Best Practices (How To)</a></li>
                           <li class="metabar-navItem js-collectionNavItem  u-uiTextMedium u-fontSize14 u-inlineBlock u-textUppercase u-letterSpacing003 u-textColorNormal u-xs-paddingRight12 u-xs-marginRight0 u-paddingTop5 u-xs-paddingTop10"><a class="link link--darken u-accentColor--textDarken link--noUnderline js-navItemLink u-baseColor--link"   href="https://medium.com/the-node-js-collection/tagged/containers">Cloud/Containers</a></li>
                           <li class="metabar-navItem js-collectionNavItem  u-uiTextMedium u-fontSize14 u-inlineBlock u-textUppercase u-letterSpacing003 u-textColorNormal u-xs-paddingRight12 u-xs-marginRight0 u-paddingTop5 u-xs-paddingTop10"><a class="link link--darken u-accentColor--textDarken link--noUnderline js-navItemLink u-baseColor--link"   href="https://medium.com/the-node-js-collection/tagged/iot">IoT</a></li>
                           <li class="metabar-navItem js-collectionNavItem  u-uiTextMedium u-fontSize14 u-inlineBlock u-textUppercase u-letterSpacing003 u-textColorNormal u-xs-paddingRight12 u-xs-marginRight0 u-paddingTop5 u-xs-paddingTop10"><a class="link link--darken u-accentColor--textDarken link--noUnderline js-navItemLink u-baseColor--link"   href="https://medium.com/the-node-js-collection/tagged/mobile">AI/Mobile</a></li>
                           <li class="metabar-navItem js-collectionNavItem  u-uiTextMedium u-fontSize14 u-inlineBlock u-textUppercase u-letterSpacing003 u-textColorNormal u-xs-paddingRight12 u-xs-marginRight0 u-paddingTop5 u-xs-paddingTop10"><a class="link link--darken u-accentColor--textDarken link--noUnderline js-navItemLink u-baseColor--link"   href="https://medium.com/the-node-js-collection/tagged/nodecore">Node Core</a></li>
                           <li class="metabar-navItem js-collectionNavItem  u-uiTextMedium u-fontSize14 u-inlineBlock u-textUppercase u-letterSpacing003 u-textColorNormal u-xs-paddingRight12 u-xs-marginRight0 u-paddingTop5 u-xs-paddingTop10"><a class="link link--darken u-accentColor--textDarken link--noUnderline js-navItemLink u-baseColor--link"   href="https://medium.com/the-node-js-collection/about">About</a></li>
                           <li class="metabar-navItem js-collectionNavItem u-uiTextMedium u-fontSize14 u-inlineBlock u-textUppercase u-letterSpacing003 u-textColorNormal u-xs-paddingRight12 u-xs-marginRight0 u-paddingTop5 u-xs-paddingTop10">
                              <a class="button button--chromeless u-baseColor--buttonNormal button--withIcon button--withSvgIcon u-top1"   href="https://medium.com/the-node-js-collection/search" title="Search" aria-label="Search">
                                 <span class="button-defaultState">
                                    <span class="svgIcon svgIcon--search svgIcon--25px">
                                       <svg class="svgIcon-use" width="25" height="25"  viewBox="0 0 25 25">
                                          <path d="M20.067 18.933l-4.157-4.157a6 6 0 1 0-.884.884l4.157 4.157a.624.624 0 1 0 .884-.884zM6.5 11c0-2.62 2.13-4.75 4.75-4.75S16 8.38 16 11s-2.13 4.75-4.75 4.75S6.5 13.62 6.5 11z"/>
                                       </svg>
                                    </span>
                                 </span>
                              </a>
                           </li>
                        </ul>
                     </nav>
                  </div>
               </div>
               <div class="metabar metabar--spacer js-metabarSpacer  u-height105 u-xs-height95"></div>
               <main role="main">
                  <article class=" u-minHeight100vhOffset65 u-overflowHidden postArticle postArticle--full is-withAccentColors u-marginBottom40"  lang="en">
                     <header class="container u-maxWidth740">
                        <div class="uiScale uiScale-ui--regular uiScale-caption--regular postMetaHeader u-paddingBottom10 row">
                           <div class="col u-size12of12 js-postMetaLockup">
                              <div class="uiScale uiScale-ui--regular uiScale-caption--regular postMetaLockup postMetaLockup--authorWithBio u-flexCenter js-postMetaLockup">
                                 <div class="u-flex0"><a class="link avatar u-baseColor--link"   href="https://medium.com/@dkhan?source=post_header_lockup" data-action="show-user-card" data-action-source="post_header_lockup" data-action-value="f2c7f8c63290" data-action-type="hover" data-user-id="f2c7f8c63290" dir="auto"><img  src="https://cdn-images-1.medium.com/fit/c/66/66/1*FC6cdUdBX54ADlECA-DVcQ.png" class="avatar-image avatar-image--small" alt="Go to the profile of Daniel Khan"></a></div>
                                 <div class="u-flex1 u-paddingLeft15 u-overflowHidden">
                                    <div class="u-lineHeightTightest"><a class="link ui-captionStrong u-inlineBlock link link--darken link--darker u-baseColor--link ui-linkSubtle"   href="https://medium.com/@dkhan?source=post_header_lockup" data-action="show-user-card" data-action-source="post_header_lockup" data-action-value="f2c7f8c63290" data-action-type="hover" data-user-id="f2c7f8c63290" dir="auto">Daniel Khan</a><span class="followState js-followState" data-user-id="f2c7f8c63290"><button class="button button--smallest u-noUserSelect button--withChrome u-baseColor--buttonNormal button--withHover button--unblock js-unblockButton u-marginLeft10 u-xs-hide"  data-action="sign-up-prompt" data-sign-in-action="toggle-block-user" data-requires-token="true" data-redirect="https://medium.com/the-node-js-collection/what-you-should-know-to-really-understand-the-node-js-event-loop-and-its-metrics-c4907b19da4c" data-action-source="post_header_lockup"><span class="button-label  button-defaultState">Blocked</span><span class="button-label button-hoverState">Unblock</span></button><button class="button button--primary button--smallest u-noUserSelect button--withChrome u-accentColor--buttonNormal button--follow js-followButton u-marginLeft10 u-xs-hide"  data-action="sign-up-prompt" data-sign-in-action="toggle-subscribe-user" data-requires-token="true" data-redirect="https://medium.com/_/subscribe/user/f2c7f8c63290" data-action-source="post_header_lockup-f2c7f8c63290-------------------------follow_byline"><span class="button-label  button-defaultState js-buttonLabel">Follow</span><span class="button-label button-activeState">Following</span></button></span></div>
                                    <div class="ui-caption ui-xs-clamp2 postMetaInline">Pragmatic full stack person. Father ⁴. Technical Product Manager @Dynatrace. All opinions are my own.</div>
                                    <div class="ui-caption postMetaInline js-testPostMetaInlineSupplemental"><time datetime="2017-07-20T14:46:34.482Z">Jul 20</time><span class="middotDivider u-fontSize12"></span><span class="readingTime" title="8 min read"></span></div>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </header>
                     <div class="postArticle-content js-postField js-notesSource js-trackedPost"  data-post-id="c4907b19da4c" data-source="post_page" data-collection-id="c80fd9f96957" data-tracking-context="postPage">
                        <section name="c519" class="section section--body section--first section--last">
                           <div class="section-divider">
                              <hr class="section-divider">
                           </div>
                           <div class="section-content">
                              <div class="section-inner sectionLayout--insetColumn">
                                 <h1 name="31ea" id="31ea" class="graf graf--h3 graf--leading graf--title">What you should know to really understand the Node.js Event Loop</h1>
                                 <p name="4f99" id="4f99" class="graf graf--p graf-after--h3">Node.js is an event-based platform. This means that everything that happens in Node is the reaction to an event. A transaction passing through Node traverses a cascade of callbacks.<br>Abstracted away from the developer, this is all handled by a library called libuv which provides a mechanism called an event loop.</p>
                                 <p name="cc87" id="cc87" class="graf graf--p graf-after--p">This event loop is maybe the most misunderstood concept of the platform.</p>
                                 <p name="1bdd" id="1bdd" class="graf graf--p graf-after--p">I work for <a href="https://dynatrace.com" data-href="https://dynatrace.com" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">Dynatrace</a>, a performance monitoring vendor and when we approached the topic of event loop monitoring, we put a lot of effort into properly understanding what we are actually measuring.</p>
                                 <p name="f7e8" id="f7e8" class="graf graf--p graf-after--p">In this article I will cover our learnings about how the event loop really works and how to monitor it properly.</p>
                                 <h3 name="2dbe" id="2dbe" class="graf graf--h3 graf-after--p">Common misconceptions</h3>
                                 <p name="767b" id="767b" class="graf graf--p graf-after--h3">Libuv is the library that provides the event loop to Node.js. In his awesome <a href="https://www.youtube.com/watch?v=PNa9OMajw9w" data-href="https://www.youtube.com/watch?v=PNa9OMajw9w" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">keynote talk at Node Interactive</a> Bert Belder, one of the key people behind libuv, started with presenting a Google image search that showed a variety of different approaches people had taken to picture the event loop and his disillusioning resume was that most of them were wrong.</p>
                                 <figure name="ebf7" id="ebf7" class="graf graf--figure graf-after--p">
                                    <div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 317px;">
                                       <div class="aspectRatioPlaceholder-fill" style="padding-bottom: 45.300000000000004%;"></div>
                                       <div class="progressiveMedia js-progressiveMedia graf-image" data-image-id="0*RdyghDfhxECLxI_Z.png" data-width="1024" data-height="464" data-action="zoom" data-action-value="0*RdyghDfhxECLxI_Z.png">
                                          <img src="https://cdn-images-1.medium.com/freeze/max/33/0*RdyghDfhxECLxI_Z.png?q=20" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail">
                                          <canvas class="progressiveMedia-canvas js-progressiveMedia-canvas"></canvas>
                                          <img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/880/0*RdyghDfhxECLxI_Z.png">
                                          <noscript class="js-progressiveMedia-inner"><img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-1.medium.com/max/880/0*RdyghDfhxECLxI_Z.png"></noscript>
                                       </div>
                                    </div>
                                 </figure>
                                 <p name="4c47" id="4c47" class="graf graf--p graf-after--figure">Let me cover the (my) most popular misunderstandings.</p>
                                 <h3 name="e762" id="e762" class="graf graf--h3 graf-after--p">Misconception 1: The event loop runs in a separate thread than the user code</h3>
                                 <h4 name="6304" id="6304" class="graf graf--h4 graf-after--h3">Misconception</h4>
                                 <p name="35de" id="35de" class="graf graf--p graf-after--h4">There is a main thread where the JavaScript code of the user (userland code) runs in and another one that runs the event loop. Every time an asynchronous operation takes place, the main thread will hand over the work to the event loop thread and once it is done, the event loop thread will ping the main thread to execute a callback.</p>
                                 <h4 name="8647" id="8647" class="graf graf--h4 graf-after--p">Reality</h4>
                                 <p name="6d76" id="6d76" class="graf graf--p graf-after--h4">There is only one thread that executes JavaScript code and this is the thread where the event loop is running. The execution of callbacks (know that every userland code in a running Node.js application is a callback) is done by the event loop. We will cover that in depth a bit later.</p>
                                 <h3 name="07f5" id="07f5" class="graf graf--h3 graf-after--p">Misconception 2: Everything that’s asynchronous is handled by a thread pool</h3>
                                 <h4 name="f435" id="f435" class="graf graf--h4 graf-after--h3">Misconception</h4>
                                 <p name="b779" id="b779" class="graf graf--p graf-after--h4">Asynchronous operations, like working with the filesystems, doing outbound HTTP requests or talking to databases are always loaded off to a thread pool provided by libuv.</p>
                                 <h4 name="d6dc" id="d6dc" class="graf graf--h4 graf-after--p">Reality</h4>
                                 <p name="67a5" id="67a5" class="graf graf--p graf-after--h4">Libuv by default creates a thread pool with four threads to offload asynchronous work to. Today’s operating systems already provide asynchronous interfaces for many I/O tasks (<a href="http://man7.org/linux/man-pages/man7/aio.7.html" data-href="http://man7.org/linux/man-pages/man7/aio.7.html" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">e.g. AIO on Linux</a>).<br>Whenever possible, libuv will use those asynchronous interfaces, avoiding usage of the thread pool. The same applies to third party subsystems like databases. Here the authors of the driver will rather use the asynchronous interface than utilizing a thread pool.<br>In short: Only if there is no other way, the thread pool will be used for asynchronous I/O.</p>
                                 <h3 name="19be" id="19be" class="graf graf--h3 graf-after--p">Misconception 3: The event loop is something like a stack or queue</h3>
                                 <h4 name="f686" id="f686" class="graf graf--h4 graf-after--h3">Misconception</h4>
                                 <p name="2a91" id="2a91" class="graf graf--p graf-after--h4">The event loop continuously traverses a FIFO of asynchronous tasks and executes the callback when a task is completed.</p>
                                 <h4 name="10ca" id="10ca" class="graf graf--h4 graf-after--p">Reality</h4>
                                 <p name="0352" id="0352" class="graf graf--p graf-after--h4">While there are queue-like structures involved, the event loop does not run through and process a stack. The event loop as a process is a set of phases with specific tasks that are processed in a round-robin manner.</p>
                                 <h3 name="2ba1" id="2ba1" class="graf graf--h3 graf-after--p">Understanding the phases of an event loop cycle</h3>
                                 <p name="56a6" id="56a6" class="graf graf--p graf-after--h3">To really understand the event loop we have to understand which work is done in which phase. Hoping that Bert Belder would approve it, my approach to show how the event loop works would be as follows:</p>
                                 <figure name="39bf" id="39bf" class="graf graf--figure graf-after--p">
                                    <div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 367px;">
                                       <div class="aspectRatioPlaceholder-fill" style="padding-bottom: 52.5%;"></div>
                                       <div class="progressiveMedia js-progressiveMedia graf-image" data-image-id="1*ROxiavz7LeRpIfcgRDE7CA.png" data-width="1227" data-height="644" data-is-featured="true" data-action="zoom" data-action-value="1*ROxiavz7LeRpIfcgRDE7CA.png">
                                          <img src="https://cdn-images-1.medium.com/freeze/max/33/1*ROxiavz7LeRpIfcgRDE7CA.png?q=20" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail">
                                          <canvas class="progressiveMedia-canvas js-progressiveMedia-canvas"></canvas>
                                          <img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/880/1*ROxiavz7LeRpIfcgRDE7CA.png">
                                          <noscript class="js-progressiveMedia-inner"><img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-1.medium.com/max/880/1*ROxiavz7LeRpIfcgRDE7CA.png"></noscript>
                                       </div>
                                    </div>
                                    <figcaption class="imageCaption">Ticks and Phases of the Node.js Event Loop</figcaption>
                                 </figure>
                                 <p name="70b3" id="70b3" class="graf graf--p graf-after--figure">Let’s discuss those phases. An in-depth explanation can be found <a href="https://nodejs.org/en/docs/guides/event-loop-timers-and-nexttick/" data-href="https://nodejs.org/en/docs/guides/event-loop-timers-and-nexttick/" class="markup--anchor markup--p-anchor" rel="noopener nofollow" target="_blank">on the Node.js website</a>.</p>
                                 <h3 name="8ce1" id="8ce1" class="graf graf--h3 graf-after--p">Timers</h3>
                                 <p name="9981" id="9981" class="graf graf--p graf-after--h3">Everything that was scheduled via setTimeout() or setInterval() will be processed here.</p>
                                 <h3 name="d0b0" id="d0b0" class="graf graf--h3 graf-after--p">IO Callbacks</h3>
                                 <p name="4eb8" id="4eb8" class="graf graf--p graf-after--h3">Here most of the callbacks will be processed. As all userland code in Node.js is basically in callbacks (e.g a callback to an incoming http request triggers a cascade of callbacks), this is the userland code.</p>
                                 <h3 name="d5b6" id="d5b6" class="graf graf--h3 graf-after--p">IO Polling</h3>
                                 <p name="d744" id="d744" class="graf graf--p graf-after--h3">Polls for new events to be processed on the next run.</p>
                                 <h3 name="d244" id="d244" class="graf graf--h3 graf-after--p">Set Immediate</h3>
                                 <p name="e82d" id="e82d" class="graf graf--p graf-after--h3">Runs all callbacks registered via setImmediate().</p>
                                 <h3 name="f752" id="f752" class="graf graf--h3 graf-after--p">Close</h3>
                                 <p name="1cf7" id="1cf7" class="graf graf--p graf-after--h3">Here all on(‘close’) event callbacks are processed.</p>
                                 <h3 name="8a87" id="8a87" class="graf graf--h3 graf-after--p">Monitoring the Event Loop</h3>
                                 <p name="5404" id="5404" class="graf graf--p graf-after--h3">We see that in fact everything that goes on in a Node applications runs through the event loop. This means that if we could get metrics out of it, they should give us valuable information about the overall health and performance of an application.<br>There is no API to fetch runtime metrics from the event loop and as such each monitoring tool provides their own metrics. Let’s see what we came up with.</p>
                                 <h3 name="7ab6" id="7ab6" class="graf graf--h3 graf-after--p">Tick Frequency</h3>
                                 <p name="3eb0" id="3eb0" class="graf graf--p graf-after--h3">The number of ticks per time.</p>
                                 <h3 name="072c" id="072c" class="graf graf--h3 graf-after--p">Tick Duration</h3>
                                 <p name="4c61" id="4c61" class="graf graf--p graf-after--h3">The time one tick takes.</p>
                                 <p name="f113" id="f113" class="graf graf--p graf-after--p">As our agent runs as a native module it was relatively easy for us to add probes to provide us this information.</p>
                                 <h4 name="8961" id="8961" class="graf graf--h4 graf-after--p">Tick frequency and tick duration metrics in action.</h4>
                                 <p name="5fcf" id="5fcf" class="graf graf--p graf-after--h4">When we did our first tests under different loads, the results were surprising — let me show you an example:</p>
                                 <p name="e081" id="e081" class="graf graf--p graf-after--p">In the following scenario I am calling an express.js application that does an outbound call to another http server.</p>
                                 <p name="2e20" id="2e20" class="graf graf--p graf-after--p">There are four scenarios:</p>
                                 <ol class="postList">
                                    <li name="4da2" id="4da2" class="graf graf--li graf-after--p">Idle<br>There are no incoming requests</li>
                                    <li name="bddb" id="bddb" class="graf graf--li graf-after--li">ab -c 5<br>Using apache bench I created 5 concurrent requests at a time</li>
                                    <li name="a990" id="a990" class="graf graf--li graf-after--li">ab -c 10<br>10 concurrent at a time</li>
                                    <li name="545f" id="545f" class="graf graf--li graf-after--li">ab -c 10 (slow backend)<br>The http server that is called returns data after 1s to simulate a slow backend. This should cause something called back pressure as requests waiting for the backend to return pile up inside Node.</li>
                                 </ol>
                                 <figure name="7a58" id="7a58" class="graf graf--figure graf-after--li">
                                    <div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 241px;">
                                       <div class="aspectRatioPlaceholder-fill" style="padding-bottom: 34.4%;"></div>
                                       <div class="progressiveMedia js-progressiveMedia graf-image" data-image-id="0*WqAUxk2NCgJkaRvp.png" data-width="1024" data-height="352" data-action="zoom" data-action-value="0*WqAUxk2NCgJkaRvp.png">
                                          <img src="https://cdn-images-1.medium.com/freeze/max/33/0*WqAUxk2NCgJkaRvp.png?q=20" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail">
                                          <canvas class="progressiveMedia-canvas js-progressiveMedia-canvas"></canvas>
                                          <img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/880/0*WqAUxk2NCgJkaRvp.png">
                                          <noscript class="js-progressiveMedia-inner"><img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-1.medium.com/max/880/0*WqAUxk2NCgJkaRvp.png"></noscript>
                                       </div>
                                    </div>
                                 </figure>
                                 <p name="5df7" id="5df7" class="graf graf--p graf-after--figure">If we look at the resulting chart we can make an interesting observation:</p>
                                 <p name="9ca1" id="9ca1" class="graf graf--p graf-after--p">Event loop duration and frequency are dynamically adapted</p>
                                 <p name="5708" id="5708" class="graf graf--p graf-after--p">If the application is idle, which means that there are no pendings tasks (Timers, callbacks, etc), it would not make sense to run through the phases with full speed, so the event loop will adapt to that and block for a while in the polling phase to wait for new external events coming in.</p>
                                 <p name="2c0e" id="2c0e" class="graf graf--p graf-after--p">This also means, that the metrics under no load are similar (low frequency, high duration) to an application that talks to a slow backend under high load.</p>
                                 <p name="92d9" id="92d9" class="graf graf--p graf-after--p">We also see that this demo application runs ‘best’ in the scenario with 5 simultaneous requests.</p>
                                 <p name="0487" id="0487" class="graf graf--p graf-after--p">Consequently tick frequency and tick duration need to be baselined factoring in the current requests per second.</p>
                                 <p name="12b5" id="12b5" class="graf graf--p graf-after--p">While this data already provides us with some valuable insights, we still don’t know in which phase the time is spent and so we researched further and came up with two more metrics.</p>
                                 <h3 name="9681" id="9681" class="graf graf--h3 graf-after--p">Work processed latency</h3>
                                 <p name="b94b" id="b94b" class="graf graf--p graf-after--h3">This metric measures how long it takes until an asynchronous task gets processed by the thread pool.</p>
                                 <p name="7a7c" id="7a7c" class="graf graf--p graf-after--p">High work processed latency indicates a busy/exhausted threadpool.</p>
                                 <p name="5c74" id="5c74" class="graf graf--p graf-after--p">To test this metric I created an express route that processes an image using a module called <a href="https://www.npmjs.com/package/sharp" data-href="https://www.npmjs.com/package/sharp" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">Sharp</a>. As image processing is expensive, Sharp utilizes the thread pool to accomplish that.</p>
                                 <figure name="9a5a" id="9a5a" class="graf graf--figure graf-after--p">
                                    <div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 245px;">
                                       <div class="aspectRatioPlaceholder-fill" style="padding-bottom: 35%;"></div>
                                       <div class="progressiveMedia js-progressiveMedia graf-image" data-image-id="0*9WHmhn_8cLPyVOYb.png" data-width="1024" data-height="358" data-action="zoom" data-action-value="0*9WHmhn_8cLPyVOYb.png">
                                          <img src="https://cdn-images-1.medium.com/freeze/max/33/0*9WHmhn_8cLPyVOYb.png?q=20" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail">
                                          <canvas class="progressiveMedia-canvas js-progressiveMedia-canvas"></canvas>
                                          <img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/880/0*9WHmhn_8cLPyVOYb.png">
                                          <noscript class="js-progressiveMedia-inner"><img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-1.medium.com/max/880/0*9WHmhn_8cLPyVOYb.png"></noscript>
                                       </div>
                                    </div>
                                 </figure>
                                 <p name="d1a4" id="d1a4" class="graf graf--p graf-after--figure">Running Apache bench with 5 concurrent connections against this a route with this image processing function reflects directly on this chart and can be clearly distinguished from a scenario of moderate load without the image processing in place.</p>
                                 <h3 name="0eca" id="0eca" class="graf graf--h3 graf-after--p">Event Loop Latency</h3>
                                 <p name="0e01" id="0e01" class="graf graf--p graf-after--h3">The event loop latency measures how long it additionally takes until a task scheduled with setTimeout(X) really gets processed.</p>
                                 <p name="b11f" id="b11f" class="graf graf--p graf-after--p">A high event loop latency indicates an event loop busy with processing callbacks.</p>
                                 <p name="a4f1" id="a4f1" class="graf graf--p graf-after--p">To test this metric, I created an express route that calculates fibonacci using a very inefficient algorithm.</p>
                                 <figure name="d0b7" id="d0b7" class="graf graf--figure graf-after--p">
                                    <div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 273px;">
                                       <div class="aspectRatioPlaceholder-fill" style="padding-bottom: 39.1%;"></div>
                                       <div class="progressiveMedia js-progressiveMedia graf-image" data-image-id="0*uqJLSsdlcDj9_IJL.png" data-width="1024" data-height="400" data-action="zoom" data-action-value="0*uqJLSsdlcDj9_IJL.png">
                                          <img src="https://cdn-images-1.medium.com/freeze/max/33/0*uqJLSsdlcDj9_IJL.png?q=20" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail">
                                          <canvas class="progressiveMedia-canvas js-progressiveMedia-canvas"></canvas>
                                          <img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/880/0*uqJLSsdlcDj9_IJL.png">
                                          <noscript class="js-progressiveMedia-inner"><img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-1.medium.com/max/880/0*uqJLSsdlcDj9_IJL.png"></noscript>
                                       </div>
                                    </div>
                                 </figure>
                                 <p name="07f9" id="07f9" class="graf graf--p graf-after--figure">Running Apache bench with 5 concurrent connections against this a route with the fibonacci function shows that now the callback queue is busy.</p>
                                 <p name="f8d2" id="f8d2" class="graf graf--p graf-after--p">We clearly see that those four metrics can provide us with valuable insights and help to understand the inner workings of Node.js better.</p>
                                 <p name="a875" id="a875" class="graf graf--p graf-after--p">Still all of that needs to be seen in a bigger picture to make sense of it. Therefore we are currently collecting information to factor in these data into our anomaly detection.</p>
                                 <h3 name="0299" id="0299" class="graf graf--h3 graf-after--p">Tuning the Event Loop</h3>
                                 <p name="7d37" id="7d37" class="graf graf--p graf-after--h3">Of course, metrics alone do not help much without knowing how to derive possible actions to remedy problems from them. Here are a few hints on what to do when the event loop seems exhausted.</p>
                                 <figure name="c2f3" id="c2f3" class="graf graf--figure graf-after--p">
                                    <div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 280px;">
                                       <div class="aspectRatioPlaceholder-fill" style="padding-bottom: 40%;"></div>
                                       <div class="progressiveMedia js-progressiveMedia graf-image" data-image-id="0*FaJr2qBOxeCFaHaG.png" data-width="1024" data-height="410" data-action="zoom" data-action-value="0*FaJr2qBOxeCFaHaG.png">
                                          <img src="https://cdn-images-1.medium.com/freeze/max/33/0*FaJr2qBOxeCFaHaG.png?q=20" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail">
                                          <canvas class="progressiveMedia-canvas js-progressiveMedia-canvas"></canvas>
                                          <img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/880/0*FaJr2qBOxeCFaHaG.png">
                                          <noscript class="js-progressiveMedia-inner"><img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-1.medium.com/max/880/0*FaJr2qBOxeCFaHaG.png"></noscript>
                                       </div>
                                    </div>
                                 </figure>
                                 <h3 name="9525" id="9525" class="graf graf--h3 graf-after--figure">Utilize all CPUs</h3>
                                 <p name="19cd" id="19cd" class="graf graf--p graf-after--h3">A Node.js application runs on a single thread. On multicore machines that means that the load isn’t distributed over all cores. Using the <a href="https://nodejs.org/api/cluster.html" data-href="https://nodejs.org/api/cluster.html" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">cluster module</a> that comes with Node it’s easy to spawn a child process per CPU. Each child process maintains its own event loop and the master process transparently distributes the load between all childs.</p>
                                 <h3 name="94e7" id="94e7" class="graf graf--h3 graf-after--p">Tune the Thread Pool</h3>
                                 <p name="6839" id="6839" class="graf graf--p graf-after--h3">As mentioned, libuv will create a thread pool with the size of 4. The default size of the pool can be overridden by setting the environment variable UV_THREADPOOL_SIZE.<br>While this can solve load problems on I/O-bound applications I’d recommend excessive load testing as a larger thread pool might still exhaust the memory or the CPU.</p>
                                 <h3 name="6a76" id="6a76" class="graf graf--h3 graf-after--p">Offload the work to Services</h3>
                                 <p name="873a" id="873a" class="graf graf--p graf-after--h3">If Node.js spends too much time with CPU heavy operations, offloading work to services maybe even using another language that better suits a specific task might be a viable option.</p>
                                 <h3 name="958a" id="958a" class="graf graf--h3 graf-after--p">Summary</h3>
                                 <p name="63e6" id="63e6" class="graf graf--p graf-after--h3">Let’s summarize what we’ve learned in this post:</p>
                                 <ul class="postList">
                                    <li name="bb09" id="bb09" class="graf graf--li graf-after--p">The event loop is what keeps a Node.js application running</li>
                                    <li name="1c18" id="1c18" class="graf graf--li graf-after--li">Its functionality is often misunderstood — it is a set of phases that are traversed continuously with specific tasks for each phase</li>
                                    <li name="1a5b" id="1a5b" class="graf graf--li graf-after--li">There are no out-of-the-box metrics provided by the event loop so the metrics collected are different between APM vendors</li>
                                    <li name="a8f6" id="a8f6" class="graf graf--li graf-after--li">The metrics clearly provide valuable insights about bottlenecks but deep understanding of the event loop and also the code that is running is key</li>
                                    <li name="859d" id="859d" class="graf graf--li graf-after--li">In the future Dynatrace will add event loop telemetry to its root cause detection to correlate event loop anomalies with problems</li>
                                 </ul>
                                 <p name="acaa" id="acaa" class="graf graf--p graf-after--li">For me there is no doubt that we just built the most comprehensive event loop monitoring solution on the market today, and I’m really happy that this amazing new feature will be rolled out to all of our customers within the next few weeks.</p>
                                 <h3 name="2198" id="2198" class="graf graf--h3 graf-after--p">Credits</h3>
                                 <p name="4d71" id="4d71" class="graf graf--p graf-after--h3">The stellar Node.js agent team at Dynatrace put a lot of effort into getting event loop monitoring right. Much of the findings presented in this blog post is based on their in-depth knowledge of the inner workings of Node.js. I’d like to thank Bernhard Liedl, Dominik Gruber, Gerhard Stöbich and Gernot Reisinger for all the work and support.</p>
                                 <p name="534d" id="534d" class="graf graf--p graf-after--p">I hope this post did shed some light on the topic. Please follow me on twitter <a href="https://twitter.com/dkhan" data-href="https://twitter.com/dkhan" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">@dkhan</a>. I’m happy to answer all your questions there or on the comment section below.</p>
                                 <p name="e007" id="e007" class="graf graf--p graf-after--p">If you still want to learn more about the inner workings of the event loop and how to leverage them as a developer, <a href="https://blog.risingstack.com/node-js-at-scale-understanding-node-js-event-loop/" data-href="https://blog.risingstack.com/node-js-at-scale-understanding-node-js-event-loop/" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">I recommend this post</a> by my friends at RisingStack.</p>
                                 <p name="b9ca" id="b9ca" class="graf graf--p graf-after--p graf--trailing">If you want to give our Node.js monitoring a try, <a href="https://www.dynatrace.com/technologies/nodejs-monitoring/" data-href="https://www.dynatrace.com/technologies/nodejs-monitoring/" class="markup--anchor markup--p-anchor" rel="noopener nofollow" target="_blank">Download our free trial</a> feel free to share your feedback with me anytime — this is how we learn.</p>
                              </div>
                           </div>
                        </section>
                     </div>
                     <footer class="u-paddingTop10">
                        <div class="container u-maxWidth740">
                           <div class="row">
                              <div class="col u-size12of12"></div>
                           </div>
                           <div class="row">
                              <div class="col u-size12of12 js-postTags">
                                 <div class="u-paddingBottom10">
                                    <ul class="tags tags--postTags tags--borderless">
                                       <li><a class="link u-baseColor--link"   href="https://medium.com/tag/nodejs?source=post" data-action-source="post">Nodejs</a></li>
                                       <li><a class="link u-baseColor--link"   href="https://medium.com/tag/performance-management?source=post" data-action-source="post">Performance Management</a></li>
                                       <li><a class="link u-baseColor--link"   href="https://medium.com/tag/monitoring?source=post" data-action-source="post">Monitoring</a></li>
                                       <li><a class="link u-baseColor--link"   href="https://medium.com/tag/performance?source=post" data-action-source="post">Performance</a></li>
                                    </ul>
                                 </div>
                              </div>
                           </div>
                           <section class="uiScale uiScale-ui--small uiScale-caption--regular u-borderTopLightest u-marginTop10">
                              <div class="ui-heading u-textColorDarker u-fontSize22"></div>
                              <p class="ui-body u-marginBottom20 u-textColorDark u-fontSize16"></p>
                           </section>
                           <div class="postActions u-flexCenter js-postActionsFooter">
                              <div class="u-flex1">
                                 <div class="multirecommend js-actionMultirecommend u-flexCenter u-width60" data-post-id="c4907b19da4c" data-is-icon-29px="true" data-is-circle="true" data-has-recommend-list="true" data-source="post_actions_footer-----c4907b19da4c---------------------clap_footer">
                                    <div class="u-relative u-foreground">
                                       <button class="button button--large button--circle button--withChrome u-baseColor--buttonNormal button--withIcon button--withSvgIcon clapButton js-actionMultirecommendButton clapButton--largePill u-relative u-foreground u-width60 u-height60 u-accentColor--textNormal u-accentColor--buttonNormal clap-onboardingcollection"  data-action="sign-up-prompt" data-sign-in-action="multivote" data-requires-token="true" data-redirect="https://medium.com/_/vote/p/c4907b19da4c" data-action-source="post_actions_footer-----c4907b19da4c---------------------clap_footer" aria-label="Clap">
                                          <span class="button-defaultState">
                                             <span class="svgIcon svgIcon--clap svgIcon--33px u-relative u-topNegative2 u-xs-top0">
                                                <svg class="svgIcon-use" width="33" height="33" viewBox="0 0 33 33" >
                                                   <path d="M28.86 17.342l-3.64-6.402c-.292-.433-.712-.729-1.163-.8a1.124 1.124 0 0 0-.889.213c-.63.488-.742 1.181-.33 2.061l1.222 2.587 1.4 2.46c2.234 4.085 1.511 8.007-2.145 11.663-.26.26-.526.49-.797.707 1.42-.084 2.881-.683 4.292-2.094 3.822-3.823 3.565-7.876 2.05-10.395zm-6.252 11.075c3.352-3.35 3.998-6.775 1.978-10.469l-3.378-5.945c-.292-.432-.712-.728-1.163-.8a1.122 1.122 0 0 0-.89.213c-.63.49-.742 1.182-.33 2.061l1.72 3.638a.502.502 0 0 1-.806.568l-8.91-8.91a1.335 1.335 0 0 0-1.887 1.886l5.292 5.292a.5.5 0 0 1-.707.707l-5.292-5.292-1.492-1.492c-.503-.503-1.382-.505-1.887 0a1.337 1.337 0 0 0 0 1.886l1.493 1.492 5.292 5.292a.499.499 0 0 1-.353.854.5.5 0 0 1-.354-.147L5.642 13.96a1.338 1.338 0 0 0-1.887 0 1.338 1.338 0 0 0 0 1.887l2.23 2.228 3.322 3.324a.499.499 0 0 1-.353.853.502.502 0 0 1-.354-.146l-3.323-3.324a1.333 1.333 0 0 0-1.886 0 1.325 1.325 0 0 0-.39.943c0 .356.138.691.39.943l6.396 6.397c3.528 3.53 8.86 5.313 12.821 1.353zM12.73 9.26l5.68 5.68-.49-1.037c-.518-1.107-.426-2.13.224-2.89l-3.303-3.304a1.337 1.337 0 0 0-1.886 0 1.326 1.326 0 0 0-.39.944c0 .217.067.42.165.607zm14.787 19.184c-1.599 1.6-3.417 2.392-5.353 2.392-.349 0-.7-.03-1.058-.082a7.922 7.922 0 0 1-3.667.887c-3.049 0-6.115-1.626-8.359-3.87l-6.396-6.397A2.315 2.315 0 0 1 2 19.724a2.327 2.327 0 0 1 1.923-2.296l-.875-.875a2.339 2.339 0 0 1 0-3.3 2.33 2.33 0 0 1 1.24-.647l-.139-.139c-.91-.91-.91-2.39 0-3.3.884-.884 2.421-.882 3.301 0l.138.14a2.335 2.335 0 0 1 3.948-1.24l.093.092c.091-.423.291-.828.62-1.157a2.336 2.336 0 0 1 3.3 0l3.384 3.386a2.167 2.167 0 0 1 1.271-.173c.534.086 1.03.354 1.441.765.11-.549.415-1.034.911-1.418a2.12 2.12 0 0 1 1.661-.41c.727.117 1.385.565 1.853 1.262l3.652 6.423c1.704 2.832 2.025 7.377-2.205 11.607zM13.217.484l-1.917.882 2.37 2.837-.454-3.719zm8.487.877l-1.928-.86-.44 3.697 2.368-2.837zM16.5 3.293L15.478-.005h2.044L16.5 3.293z" fill-rule="evenodd"/>
                                                </svg>
                                             </span>
                                          </span>
                                          <span class="button-activeState">
                                             <span class="svgIcon svgIcon--clapFilled svgIcon--33px u-relative u-topNegative2 u-xs-top0">
                                                <svg class="svgIcon-use" width="33" height="33" viewBox="0 0 33 33" >
                                                   <g fill-rule="evenodd">
                                                      <path d="M29.58 17.1l-3.854-6.78c-.365-.543-.876-.899-1.431-.989a1.491 1.491 0 0 0-1.16.281c-.42.327-.65.736-.7 1.207v.001l3.623 6.367c2.46 4.498 1.67 8.802-2.333 12.807-.265.265-.536.505-.81.728 1.973-.222 3.474-1.286 4.45-2.263 4.166-4.165 3.875-8.6 2.215-11.36zm-4.831.82l-3.581-6.3c-.296-.439-.725-.742-1.183-.815a1.105 1.105 0 0 0-.89.213c-.647.502-.755 1.188-.33 2.098l1.825 3.858a.601.601 0 0 1-.197.747.596.596 0 0 1-.77-.067L10.178 8.21c-.508-.506-1.393-.506-1.901 0a1.335 1.335 0 0 0-.393.95c0 .36.139.698.393.95v.001l5.61 5.61a.599.599 0 1 1-.848.847l-5.606-5.606c-.001 0-.002 0-.003-.002L5.848 9.375a1.349 1.349 0 0 0-1.902 0 1.348 1.348 0 0 0 0 1.901l1.582 1.582 5.61 5.61a.6.6 0 0 1-.848.848l-5.61-5.61c-.51-.508-1.393-.508-1.9 0a1.332 1.332 0 0 0-.394.95c0 .36.139.697.393.952l2.363 2.362c.002.001.002.002.002.003l3.52 3.52a.6.6 0 0 1-.848.847l-3.522-3.523h-.001a1.336 1.336 0 0 0-.95-.393 1.345 1.345 0 0 0-.949 2.295l6.779 6.78c3.715 3.713 9.327 5.598 13.49 1.434 3.527-3.528 4.21-7.13 2.086-11.015zM11.817 7.727c.06-.328.213-.64.466-.893.64-.64 1.755-.64 2.396 0l3.232 3.232c-.82.783-1.09 1.833-.764 2.992l-5.33-5.33z"/>
                                                      <path d="M13.285.48l-1.916.881 2.37 2.837z"/>
                                                      <path d="M21.719 1.361L19.79.501l-.44 3.697z"/>
                                                      <path d="M16.502 3.298L15.481 0h2.043z"/>
                                                   </g>
                                                </svg>
                                             </span>
                                          </span>
                                       </button>
                                       <div class="clapUndo u-width60 u-round u-height32 u-absolute u-borderBox u-paddingRight5 u-transition--transform200Spring u-background--brandSageLighter js-clapUndo" style="top: 14px; padding: 2px;">
                                          <button class="button button--chromeless u-baseColor--buttonNormal button--withIcon button--withSvgIcon u-floatRight"  data-action="multivote-undo" data-action-value="c4907b19da4c">
                                             <span class="svgIcon svgIcon--removeThin svgIcon--29px">
                                                <svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" >
                                                   <path d="M20.13 8.11l-5.61 5.61-5.609-5.61-.801.801 5.61 5.61-5.61 5.61.801.8 5.61-5.609 5.61 5.61.8-.801-5.609-5.61 5.61-5.61" fill-rule="evenodd"/>
                                                </svg>
                                             </span>
                                          </button>
                                       </div>
                                    </div>
                                    <span class="u-textAlignCenter u-relative u-background js-actionMultirecommendCount u-marginLeft10"><button class="button button--chromeless u-baseColor--buttonNormal js-multirecommendCountButton"  data-action="show-recommends" data-action-value="c4907b19da4c">1.1K</button></span>
                                 </div>
                              </div>
                              <div class="buttonSet u-flex0">
                                 <button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon"  data-action="scroll-to-responses" data-action-source="post_actions_footer">
                                    <span class="svgIcon svgIcon--response svgIcon--29px">
                                       <svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" >
                                          <path d="M21.27 20.058c1.89-1.826 2.754-4.17 2.754-6.674C24.024 8.21 19.67 4 14.1 4 8.53 4 4 8.21 4 13.384c0 5.175 4.53 9.385 10.1 9.385 1.007 0 2-.14 2.95-.41.285.25.592.49.918.7 1.306.87 2.716 1.31 4.19 1.31.276-.01.494-.14.6-.36a.625.625 0 0 0-.052-.65c-.61-.84-1.042-1.71-1.282-2.58a5.417 5.417 0 0 1-.154-.75zm-3.85 1.324l-.083-.28-.388.12a9.72 9.72 0 0 1-2.85.424c-4.96 0-8.99-3.706-8.99-8.262 0-4.556 4.03-8.263 8.99-8.263 4.95 0 8.77 3.71 8.77 8.27 0 2.25-.75 4.35-2.5 5.92l-.24.21v.32c0 .07 0 .19.02.37.03.29.1.6.19.92.19.7.49 1.4.89 2.08-.93-.14-1.83-.49-2.67-1.06-.34-.22-.88-.48-1.16-.74z"/>
                                       </svg>
                                    </span>
                                 </button>
                                 <button class="button button--chromeless u-baseColor--buttonNormal"  data-action="scroll-to-responses">10</button>
                                 <button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon u-xs-hide"  title="Share on Twitter" aria-label="Share on Twitter" data-action="share-on-twitter" data-action-source="post_actions_footer">
                                    <span class="svgIcon svgIcon--twitter svgIcon--29px">
                                       <svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" >
                                          <path d="M21.967 11.8c.018 5.93-4.607 11.18-11.177 11.18-2.172 0-4.25-.62-6.047-1.76l-.268.422-.038.5.186.013.168.012c.3.02.44.032.6.046 2.06-.026 3.95-.686 5.49-1.86l1.12-.85-1.4-.048c-1.57-.055-2.92-1.08-3.36-2.51l-.48.146-.05.5c.22.03.48.05.75.08.48-.02.87-.07 1.25-.15l2.33-.49-2.32-.49c-1.68-.35-2.91-1.83-2.91-3.55 0-.05 0-.01-.01.03l-.49-.1-.25.44c.63.36 1.35.57 2.07.58l1.7.04L7.4 13c-.978-.662-1.59-1.79-1.618-3.047a4.08 4.08 0 0 1 .524-1.8l-.825.07a12.188 12.188 0 0 0 8.81 4.515l.59.033-.06-.59v-.02c-.05-.43-.06-.63-.06-.87a3.617 3.617 0 0 1 6.27-2.45l.2.21.28-.06c1.01-.22 1.94-.59 2.73-1.09l-.75-.56c-.1.36-.04.89.12 1.36.23.68.58 1.13 1.17.85l-.21-.45-.42-.27c-.52.8-1.17 1.48-1.92 2L22 11l.016.28c.013.2.014.35 0 .52v.04zm.998.038c.018-.22.017-.417 0-.66l-.498.034.284.41a8.183 8.183 0 0 0 2.2-2.267l.97-1.48-1.6.755c.17-.08.3-.02.34.03a.914.914 0 0 1-.13-.292c-.1-.297-.13-.64-.1-.766l.36-1.254-1.1.695c-.69.438-1.51.764-2.41.963l.48.15a4.574 4.574 0 0 0-3.38-1.484 4.616 4.616 0 0 0-4.61 4.613c0 .29.02.51.08.984l.01.02.5-.06.03-.5c-3.17-.18-6.1-1.7-8.08-4.15l-.48-.56-.36.64c-.39.69-.62 1.48-.65 2.28.04 1.61.81 3.04 2.06 3.88l.3-.92c-.55-.02-1.11-.17-1.6-.45l-.59-.34-.14.67c-.02.08-.02.16 0 .24-.01 2.12 1.55 4.01 3.69 4.46l.1-.49-.1-.49c-.33.07-.67.12-1.03.14-.18-.02-.43-.05-.64-.07l-.76-.09.23.73c.57 1.84 2.29 3.14 4.28 3.21l-.28-.89a8.252 8.252 0 0 1-4.85 1.66c-.12-.01-.26-.02-.56-.05l-.17-.01-.18-.01L2.53 21l1.694 1.07a12.233 12.233 0 0 0 6.58 1.917c7.156 0 12.2-5.73 12.18-12.18l-.002.04z"/>
                                       </svg>
                                    </span>
                                 </button>
                                 <button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon u-xs-hide"  title="Share on Facebook" aria-label="Share on Facebook" data-action="share-on-facebook" data-action-source="post_actions_footer">
                                    <span class="svgIcon svgIcon--facebook svgIcon--29px">
                                       <svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" >
                                          <path d="M16.39 23.61v-5.808h1.846a.55.55 0 0 0 .546-.48l.36-2.797a.551.551 0 0 0-.547-.62H16.39V12.67c0-.67.12-.813.828-.813h1.474a.55.55 0 0 0 .55-.55V8.803a.55.55 0 0 0-.477-.545c-.436-.06-1.36-.116-2.22-.116-2.5 0-4.13 1.62-4.13 4.248v1.513H10.56a.551.551 0 0 0-.55.55v2.797c0 .304.248.55.55.55h1.855v5.76c-4.172-.96-7.215-4.7-7.215-9.1 0-5.17 4.17-9.36 9.31-9.36 5.14 0 9.31 4.19 9.31 9.36 0 4.48-3.155 8.27-7.43 9.15M14.51 4C8.76 4 4.1 8.684 4.1 14.46c0 5.162 3.75 9.523 8.778 10.32a.55.55 0 0 0 .637-.543v-6.985a.551.551 0 0 0-.55-.55H11.11v-1.697h1.855a.55.55 0 0 0 .55-.55v-2.063c0-2.02 1.136-3.148 3.03-3.148.567 0 1.156.027 1.597.06v1.453h-.924c-1.363 0-1.93.675-1.93 1.912v1.78c0 .3.247.55.55.55h2.132l-.218 1.69H15.84c-.305 0-.55.24-.55.55v7.02c0 .33.293.59.623.54 5.135-.7 9.007-5.11 9.007-10.36C24.92 8.68 20.26 4 14.51 4"/>
                                       </svg>
                                    </span>
                                 </button>
                                 <button class="button button--large button--dark button--chromeless u-baseColor--buttonDark button--withIcon button--withSvgIcon u-xs-show"  title="Share this story on Twitter or Facebook" aria-label="Share this story on Twitter or Facebook" data-action="show-share-popover" data-action-source="post_actions_footer">
                                    <span class="svgIcon svgIcon--share svgIcon--29px">
                                       <svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" >
                                          <path d="M20.385 8H19a.5.5 0 1 0 .011 1h1.39c.43 0 .84.168 1.14.473.31.305.48.71.48 1.142v10.77c0 .43-.17.837-.47 1.142-.3.305-.71.473-1.14.473H8.62c-.43 0-.84-.168-1.144-.473a1.603 1.603 0 0 1-.473-1.142v-10.77c0-.43.17-.837.48-1.142A1.599 1.599 0 0 1 8.62 9H10a.502.502 0 0 0 0-1H8.615c-.67 0-1.338.255-1.85.766-.51.51-.765 1.18-.765 1.85v10.77c0 .668.255 1.337.766 1.848.51.51 1.18.766 1.85.766h11.77c.668 0 1.337-.255 1.848-.766.51-.51.766-1.18.766-1.85v-10.77c0-.668-.255-1.337-.766-1.848A2.61 2.61 0 0 0 20.384 8zm-8.67-2.508L14 3.207v8.362c0 .27.224.5.5.5s.5-.23.5-.5V3.2l2.285 2.285a.49.49 0 0 0 .704-.001.511.511 0 0 0 0-.708l-3.14-3.14a.504.504 0 0 0-.71 0L11 4.776a.501.501 0 0 0 .71.706" fill-rule="evenodd"/>
                                       </svg>
                                    </span>
                                 </button>
                              </div>
                           </div>
                        </div>
                        <div class="u-maxWidth740 u-paddingTop20 u-marginTop20 u-borderTopLightest container u-paddingBottom20 u-xs-paddingBottom10 js-postAttributionFooterContainer">
                           <div class="row js-postFooterInfo">
                              <div class="col u-size6of12 u-xs-size12of12">
                                 <li class="uiScale uiScale-ui--small uiScale-caption--regular u-block u-paddingBottom18 js-cardUser">
                                    <div class="u-marginLeft20 u-floatRight"><span class="followState js-followState" data-user-id="f2c7f8c63290"><button class="button button--small u-noUserSelect button--withChrome u-baseColor--buttonNormal button--withHover button--unblock js-unblockButton"  data-action="sign-up-prompt" data-sign-in-action="toggle-block-user" data-requires-token="true" data-redirect="https://medium.com/the-node-js-collection/what-you-should-know-to-really-understand-the-node-js-event-loop-and-its-metrics-c4907b19da4c" data-action-source="footer_card"><span class="button-label  button-defaultState">Blocked</span><span class="button-label button-hoverState">Unblock</span></button><button class="button button--primary button--small u-noUserSelect button--withChrome u-accentColor--buttonNormal button--follow js-followButton"  data-action="sign-up-prompt" data-sign-in-action="toggle-subscribe-user" data-requires-token="true" data-redirect="https://medium.com/_/subscribe/user/f2c7f8c63290" data-action-source="footer_card-f2c7f8c63290-------------------------follow_footer"><span class="button-label  button-defaultState js-buttonLabel">Follow</span><span class="button-label button-activeState">Following</span></button></span></div>
                                    <div class="u-tableCell"><a class="link avatar u-baseColor--link"   href="https://medium.com/@dkhan?source=footer_card" title="Go to the profile of Daniel Khan" aria-label="Go to the profile of Daniel Khan" data-action-source="footer_card" data-user-id="f2c7f8c63290" dir="auto"><img  src="https://cdn-images-1.medium.com/fit/c/66/66/1*FC6cdUdBX54ADlECA-DVcQ.png" class="avatar-image avatar-image--small" alt="Go to the profile of Daniel Khan"></a></div>
                                    <div class="u-tableCell u-verticalAlignMiddle u-breakWord u-paddingLeft15">
                                       <h3 class="ui-heading u-fontSize18 u-lineHeightTighter u-marginBottom4"><a class="link link--primary u-accentColor--hoverTextNormal"   href="https://medium.com/@dkhan" property="cc:attributionName" title="Go to the profile of Daniel Khan" aria-label="Go to the profile of Daniel Khan" rel="author cc:attributionUrl" data-user-id="f2c7f8c63290" dir="auto">Daniel Khan</a></h3>
                                       <p class="ui-body u-fontSize14 u-lineHeightBaseSans u-textColorDark u-marginBottom4">Pragmatic full stack person. Father ⁴. Technical Product Manager <a href="http://twitter.com/Dynatrace" target="_blank" title="Twitter profile for @Dynatrace">@Dynatrace</a>. All opinions are my own.</p>
                                    </div>
                                 </li>
                              </div>
                              <div class="col u-size6of12 u-xs-size12of12 u-xs-marginTop30">
                                 <li class="uiScale uiScale-ui--small uiScale-caption--regular u-block u-paddingBottom18 js-cardCollection">
                                    <div class="u-marginLeft20 u-floatRight"><button class="button button--primary button--small u-noUserSelect button--withChrome u-accentColor--buttonNormal js-relationshipButton"  data-action="sign-up-prompt" data-sign-in-action="toggle-follow-collection" data-requires-token="true" data-redirect="https://medium.com/_/subscribe/collection/the-node-js-collection" data-action-source="----c80fd9f96957----------------------follow_footer" data-collection-id="c80fd9f96957"><span class="button-label  js-buttonLabel">Follow</span></button></div>
                                    <div class="u-tableCell "><a class="link avatar avatar--roundedRectangle u-baseColor--link"   href="https://medium.com/the-node-js-collection?source=footer_card" title="Go to Node.js Collection" aria-label="Go to Node.js Collection" data-action-source="footer_card"><img src="https://cdn-images-1.medium.com/fit/c/66/66/1*tfZa4vsI6UusJYt_fzvGnQ.png" class="avatar-image u-size60x60" alt="Node.js Collection"></a></div>
                                    <div class="u-tableCell u-verticalAlignMiddle u-breakWord u-paddingLeft15">
                                       <h3 class="ui-heading u-fontSize18 u-lineHeightTighter u-marginBottom4"><a class="link link--primary u-accentColor--hoverTextNormal"   href="https://medium.com/the-node-js-collection?source=footer_card" rel="collection" data-action-source="footer_card">Node.js Collection</a></h3>
                                       <p class="ui-body u-fontSize14 u-lineHeightBaseSans u-textColorDark u-marginBottom4">Community-curated content for the millions of Node.js users.</p>
                                       <div class="buttonSet"></div>
                                    </div>
                                 </li>
                              </div>
                           </div>
                        </div>
                        <div class="js-postFooterPlacements"></div>
                        <div class="u-padding0 u-clearfix u-backgroundGrayLightest u-print-hide supplementalPostContent js-responsesWrapper"></div>
                        <div class="supplementalPostContent js-heroPromo"></div>
                     </footer>
                  </article>
               </main>
               <div class="u-marginAuto u-maxWidth1000">
                  <div class="js-postShareWidget u-foreground u-sm-hide u-transition--fadeOut300 u-fixed">
                     <ul>
                        <li class="u-textAlignCenter u-marginVertical10">
                           <div class="multirecommend js-actionMultirecommend u-flexColumn u-marginBottom10 u-width60" data-post-id="c4907b19da4c" data-is-icon-29px="true" data-is-vertical="true" data-is-circle="true" data-is-compressed="true" data-has-recommend-list="true" data-source="post_share_widget-----c4907b19da4c---------------------clap_sidebar">
                              <div class="u-relative u-foreground">
                                 <button class="button button--large button--circle button--withChrome u-baseColor--buttonNormal button--withIcon button--withSvgIcon clapButton js-actionMultirecommendButton clapButton--largePill u-relative u-foreground u-width60 u-height60 u-accentColor--textNormal u-accentColor--buttonNormal"  data-action="sign-up-prompt" data-sign-in-action="multivote" data-requires-token="true" data-redirect="https://medium.com/_/vote/p/c4907b19da4c" data-action-source="post_share_widget-----c4907b19da4c---------------------clap_sidebar" aria-label="Clap">
                                    <span class="button-defaultState">
                                       <span class="svgIcon svgIcon--clap svgIcon--33px u-relative u-topNegative2 u-xs-top0">
                                          <svg class="svgIcon-use" width="33" height="33" viewBox="0 0 33 33" >
                                             <path d="M28.86 17.342l-3.64-6.402c-.292-.433-.712-.729-1.163-.8a1.124 1.124 0 0 0-.889.213c-.63.488-.742 1.181-.33 2.061l1.222 2.587 1.4 2.46c2.234 4.085 1.511 8.007-2.145 11.663-.26.26-.526.49-.797.707 1.42-.084 2.881-.683 4.292-2.094 3.822-3.823 3.565-7.876 2.05-10.395zm-6.252 11.075c3.352-3.35 3.998-6.775 1.978-10.469l-3.378-5.945c-.292-.432-.712-.728-1.163-.8a1.122 1.122 0 0 0-.89.213c-.63.49-.742 1.182-.33 2.061l1.72 3.638a.502.502 0 0 1-.806.568l-8.91-8.91a1.335 1.335 0 0 0-1.887 1.886l5.292 5.292a.5.5 0 0 1-.707.707l-5.292-5.292-1.492-1.492c-.503-.503-1.382-.505-1.887 0a1.337 1.337 0 0 0 0 1.886l1.493 1.492 5.292 5.292a.499.499 0 0 1-.353.854.5.5 0 0 1-.354-.147L5.642 13.96a1.338 1.338 0 0 0-1.887 0 1.338 1.338 0 0 0 0 1.887l2.23 2.228 3.322 3.324a.499.499 0 0 1-.353.853.502.502 0 0 1-.354-.146l-3.323-3.324a1.333 1.333 0 0 0-1.886 0 1.325 1.325 0 0 0-.39.943c0 .356.138.691.39.943l6.396 6.397c3.528 3.53 8.86 5.313 12.821 1.353zM12.73 9.26l5.68 5.68-.49-1.037c-.518-1.107-.426-2.13.224-2.89l-3.303-3.304a1.337 1.337 0 0 0-1.886 0 1.326 1.326 0 0 0-.39.944c0 .217.067.42.165.607zm14.787 19.184c-1.599 1.6-3.417 2.392-5.353 2.392-.349 0-.7-.03-1.058-.082a7.922 7.922 0 0 1-3.667.887c-3.049 0-6.115-1.626-8.359-3.87l-6.396-6.397A2.315 2.315 0 0 1 2 19.724a2.327 2.327 0 0 1 1.923-2.296l-.875-.875a2.339 2.339 0 0 1 0-3.3 2.33 2.33 0 0 1 1.24-.647l-.139-.139c-.91-.91-.91-2.39 0-3.3.884-.884 2.421-.882 3.301 0l.138.14a2.335 2.335 0 0 1 3.948-1.24l.093.092c.091-.423.291-.828.62-1.157a2.336 2.336 0 0 1 3.3 0l3.384 3.386a2.167 2.167 0 0 1 1.271-.173c.534.086 1.03.354 1.441.765.11-.549.415-1.034.911-1.418a2.12 2.12 0 0 1 1.661-.41c.727.117 1.385.565 1.853 1.262l3.652 6.423c1.704 2.832 2.025 7.377-2.205 11.607zM13.217.484l-1.917.882 2.37 2.837-.454-3.719zm8.487.877l-1.928-.86-.44 3.697 2.368-2.837zM16.5 3.293L15.478-.005h2.044L16.5 3.293z" fill-rule="evenodd"/>
                                          </svg>
                                       </span>
                                    </span>
                                    <span class="button-activeState">
                                       <span class="svgIcon svgIcon--clapFilled svgIcon--33px u-relative u-topNegative2 u-xs-top0">
                                          <svg class="svgIcon-use" width="33" height="33" viewBox="0 0 33 33" >
                                             <g fill-rule="evenodd">
                                                <path d="M29.58 17.1l-3.854-6.78c-.365-.543-.876-.899-1.431-.989a1.491 1.491 0 0 0-1.16.281c-.42.327-.65.736-.7 1.207v.001l3.623 6.367c2.46 4.498 1.67 8.802-2.333 12.807-.265.265-.536.505-.81.728 1.973-.222 3.474-1.286 4.45-2.263 4.166-4.165 3.875-8.6 2.215-11.36zm-4.831.82l-3.581-6.3c-.296-.439-.725-.742-1.183-.815a1.105 1.105 0 0 0-.89.213c-.647.502-.755 1.188-.33 2.098l1.825 3.858a.601.601 0 0 1-.197.747.596.596 0 0 1-.77-.067L10.178 8.21c-.508-.506-1.393-.506-1.901 0a1.335 1.335 0 0 0-.393.95c0 .36.139.698.393.95v.001l5.61 5.61a.599.599 0 1 1-.848.847l-5.606-5.606c-.001 0-.002 0-.003-.002L5.848 9.375a1.349 1.349 0 0 0-1.902 0 1.348 1.348 0 0 0 0 1.901l1.582 1.582 5.61 5.61a.6.6 0 0 1-.848.848l-5.61-5.61c-.51-.508-1.393-.508-1.9 0a1.332 1.332 0 0 0-.394.95c0 .36.139.697.393.952l2.363 2.362c.002.001.002.002.002.003l3.52 3.52a.6.6 0 0 1-.848.847l-3.522-3.523h-.001a1.336 1.336 0 0 0-.95-.393 1.345 1.345 0 0 0-.949 2.295l6.779 6.78c3.715 3.713 9.327 5.598 13.49 1.434 3.527-3.528 4.21-7.13 2.086-11.015zM11.817 7.727c.06-.328.213-.64.466-.893.64-.64 1.755-.64 2.396 0l3.232 3.232c-.82.783-1.09 1.833-.764 2.992l-5.33-5.33z"/>
                                                <path d="M13.285.48l-1.916.881 2.37 2.837z"/>
                                                <path d="M21.719 1.361L19.79.501l-.44 3.697z"/>
                                                <path d="M16.502 3.298L15.481 0h2.043z"/>
                                             </g>
                                          </svg>
                                       </span>
                                    </span>
                                 </button>
                                 <div class="clapUndo u-width60 u-round u-height32 u-absolute u-borderBox u-paddingRight5 u-transition--transform200Spring u-background--brandSageLighter js-clapUndo" style="top: 14px; padding: 2px;">
                                    <button class="button button--chromeless u-baseColor--buttonNormal button--withIcon button--withSvgIcon u-floatRight"  data-action="multivote-undo" data-action-value="c4907b19da4c">
                                       <span class="svgIcon svgIcon--removeThin svgIcon--29px">
                                          <svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" >
                                             <path d="M20.13 8.11l-5.61 5.61-5.609-5.61-.801.801 5.61 5.61-5.61 5.61.801.8 5.61-5.609 5.61 5.61.8-.801-5.609-5.61 5.61-5.61" fill-rule="evenodd"/>
                                          </svg>
                                       </span>
                                    </button>
                                 </div>
                              </div>
                              <span class="u-textAlignCenter u-relative u-background js-actionMultirecommendCount u-flexOrderNegative1 u-height20 u-marginBottom7"><button class="button button--chromeless u-baseColor--buttonNormal js-multirecommendCountButton u-block u-marginAuto"  data-action="show-recommends" data-action-value="c4907b19da4c">1.1K</button></span>
                           </div>
                        </li>
                        <li class="u-textAlignCenter u-marginVertical10">
                           <button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon"  title="Share on Twitter" aria-label="Share on Twitter" data-action="share-on-twitter" data-action-source="post_share_widget">
                              <span class="svgIcon svgIcon--twitter svgIcon--29px">
                                 <svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" >
                                    <path d="M21.967 11.8c.018 5.93-4.607 11.18-11.177 11.18-2.172 0-4.25-.62-6.047-1.76l-.268.422-.038.5.186.013.168.012c.3.02.44.032.6.046 2.06-.026 3.95-.686 5.49-1.86l1.12-.85-1.4-.048c-1.57-.055-2.92-1.08-3.36-2.51l-.48.146-.05.5c.22.03.48.05.75.08.48-.02.87-.07 1.25-.15l2.33-.49-2.32-.49c-1.68-.35-2.91-1.83-2.91-3.55 0-.05 0-.01-.01.03l-.49-.1-.25.44c.63.36 1.35.57 2.07.58l1.7.04L7.4 13c-.978-.662-1.59-1.79-1.618-3.047a4.08 4.08 0 0 1 .524-1.8l-.825.07a12.188 12.188 0 0 0 8.81 4.515l.59.033-.06-.59v-.02c-.05-.43-.06-.63-.06-.87a3.617 3.617 0 0 1 6.27-2.45l.2.21.28-.06c1.01-.22 1.94-.59 2.73-1.09l-.75-.56c-.1.36-.04.89.12 1.36.23.68.58 1.13 1.17.85l-.21-.45-.42-.27c-.52.8-1.17 1.48-1.92 2L22 11l.016.28c.013.2.014.35 0 .52v.04zm.998.038c.018-.22.017-.417 0-.66l-.498.034.284.41a8.183 8.183 0 0 0 2.2-2.267l.97-1.48-1.6.755c.17-.08.3-.02.34.03a.914.914 0 0 1-.13-.292c-.1-.297-.13-.64-.1-.766l.36-1.254-1.1.695c-.69.438-1.51.764-2.41.963l.48.15a4.574 4.574 0 0 0-3.38-1.484 4.616 4.616 0 0 0-4.61 4.613c0 .29.02.51.08.984l.01.02.5-.06.03-.5c-3.17-.18-6.1-1.7-8.08-4.15l-.48-.56-.36.64c-.39.69-.62 1.48-.65 2.28.04 1.61.81 3.04 2.06 3.88l.3-.92c-.55-.02-1.11-.17-1.6-.45l-.59-.34-.14.67c-.02.08-.02.16 0 .24-.01 2.12 1.55 4.01 3.69 4.46l.1-.49-.1-.49c-.33.07-.67.12-1.03.14-.18-.02-.43-.05-.64-.07l-.76-.09.23.73c.57 1.84 2.29 3.14 4.28 3.21l-.28-.89a8.252 8.252 0 0 1-4.85 1.66c-.12-.01-.26-.02-.56-.05l-.17-.01-.18-.01L2.53 21l1.694 1.07a12.233 12.233 0 0 0 6.58 1.917c7.156 0 12.2-5.73 12.18-12.18l-.002.04z"/>
                                 </svg>
                              </span>
                           </button>
                        </li>
                        <li class="u-textAlignCenter u-marginVertical10">
                           <button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon"  title="Share on Facebook" aria-label="Share on Facebook" data-action="share-on-facebook" data-action-source="post_share_widget">
                              <span class="svgIcon svgIcon--facebook svgIcon--29px">
                                 <svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" >
                                    <path d="M16.39 23.61v-5.808h1.846a.55.55 0 0 0 .546-.48l.36-2.797a.551.551 0 0 0-.547-.62H16.39V12.67c0-.67.12-.813.828-.813h1.474a.55.55 0 0 0 .55-.55V8.803a.55.55 0 0 0-.477-.545c-.436-.06-1.36-.116-2.22-.116-2.5 0-4.13 1.62-4.13 4.248v1.513H10.56a.551.551 0 0 0-.55.55v2.797c0 .304.248.55.55.55h1.855v5.76c-4.172-.96-7.215-4.7-7.215-9.1 0-5.17 4.17-9.36 9.31-9.36 5.14 0 9.31 4.19 9.31 9.36 0 4.48-3.155 8.27-7.43 9.15M14.51 4C8.76 4 4.1 8.684 4.1 14.46c0 5.162 3.75 9.523 8.778 10.32a.55.55 0 0 0 .637-.543v-6.985a.551.551 0 0 0-.55-.55H11.11v-1.697h1.855a.55.55 0 0 0 .55-.55v-2.063c0-2.02 1.136-3.148 3.03-3.148.567 0 1.156.027 1.597.06v1.453h-.924c-1.363 0-1.93.675-1.93 1.912v1.78c0 .3.247.55.55.55h2.132l-.218 1.69H15.84c-.305 0-.55.24-.55.55v7.02c0 .33.293.59.623.54 5.135-.7 9.007-5.11 9.007-10.36C24.92 8.68 20.26 4 14.51 4"/>
                                 </svg>
                              </span>
                           </button>
                        </li>
                        <li class="u-textAlignCenter u-marginVertical10">
                           <button class="button button--large button--dark button--chromeless is-touchIconFadeInPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon button--bookmark js-bookmarkButton"  title="Bookmark this story to read later" aria-label="Bookmark this story to read later" data-action="sign-up-prompt" data-sign-in-action="add-to-bookmarks" data-requires-token="true" data-redirect="https://medium.com/_/bookmark/p/c4907b19da4c" data-action-source="post_share_widget-----c4907b19da4c---------------------bookmark_sidebar">
                              <span class="button-defaultState">
                                 <span class="svgIcon svgIcon--bookmark svgIcon--29px">
                                    <svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" >
                                       <path d="M19.385 4h-9.77A2.623 2.623 0 0 0 7 6.615V23.01a1.022 1.022 0 0 0 1.595.847l5.905-4.004 5.905 4.004A1.022 1.022 0 0 0 22 23.011V6.62A2.625 2.625 0 0 0 19.385 4zM21 23l-5.91-3.955-.148-.107a.751.751 0 0 0-.884 0l-.147.107L8 23V6.615C8 5.725 8.725 5 9.615 5h9.77C20.275 5 21 5.725 21 6.615V23z" fill-rule="evenodd"/>
                                    </svg>
                                 </span>
                              </span>
                              <span class="button-activeState">
                                 <span class="svgIcon svgIcon--bookmarkFilled svgIcon--29px">
                                    <svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" >
                                       <path d="M19.385 4h-9.77A2.623 2.623 0 0 0 7 6.615V23.01a1.022 1.022 0 0 0 1.595.847l5.905-4.004 5.905 4.004A1.022 1.022 0 0 0 22 23.011V6.62A2.625 2.625 0 0 0 19.385 4z" fill-rule="evenodd"/>
                                    </svg>
                                 </span>
                              </span>
                           </button>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="u-fixed u-bottom0 u-sizeFullWidth u-backgroundWhite u-boxShadowTop u-borderBox u-paddingTop10 u-paddingBottom10 u-zIndexMetabar u-xs-paddingLeft10 u-xs-paddingRight10 js-stickyFooter">
                  <div class="u-maxWidth700 u-marginAuto u-flexCenter">
                     <div class="u-fontSize16 u-flex1 u-flexCenter">
                        <div class="u-flex0 u-inlineBlock u-paddingRight20 u-xs-paddingRight10"><a class="link avatar avatar--roundedRectangle u-baseColor--link"   href="https://medium.com/the-node-js-collection" title="Go to Node.js Collection" aria-label="Go to Node.js Collection"><img src="https://cdn-images-1.medium.com/fit/c/44/44/1*tfZa4vsI6UusJYt_fzvGnQ.png" class="avatar-image avatar-image--smaller" alt="Node.js Collection"></a></div>
                        <div class="u-flex1 u-inlineBlock">
                           <div class="u-xs-hide">Never miss a story from<strong> Node.js Collection</strong>, when you sign up for Medium. <a class="link link--accent u-accentColor--textNormal u-accentColor--textDarken u-baseColor--link"   href="https://medium.com/@Medium/personalize-your-medium-experience-with-users-publications-tags-26a41ab1ee0c#.hx4zuv3mg" data-action-source="sticky_footer">Learn more</a></div>
                           <div class="u-xs-show">Never miss a story from<strong> Node.js Collection</strong></div>
                        </div>
                     </div>
                     <div class="u-marginLeft50 u-xs-marginAuto"><button class="button button--primary button--dark is-active u-noUserSelect button--withChrome u-accentColor--buttonDark u-uiTextSemibold u-textUppercase u-fontSize12 button--followCollection js-followCollectionButton"  data-action="sign-up-prompt" data-sign-in-action="toggle-subscribe-collection" data-requires-token="true" data-redirect="https://medium.com/_/subscribe/collection/the-node-js-collection" data-action-source="sticky_footer----c80fd9f96957----------------------follow_metabar"><span class="button-label  button-defaultState js-buttonLabel">Get updates</span><span class="button-label button-activeState">Get updates</span></button></div>
                  </div>
               </div>
               <style class="js-collectionStyle">
                  .u-accentColor--borderLight {border-color: #02B875 !important;}
                  .u-accentColor--borderNormal {border-color: #02B875 !important;}
                  .u-accentColor--borderDark {border-color: #1C9963 !important;}
                  .u-accentColor--iconLight .svgIcon,.u-accentColor--iconLight.svgIcon {fill: #02B875 !important;}
                  .u-accentColor--iconNormal .svgIcon,.u-accentColor--iconNormal.svgIcon {fill: #02B875 !important;}
                  .u-accentColor--iconDark .svgIcon,.u-accentColor--iconDark.svgIcon {fill: #1C9963 !important;}
                  .u-accentColor--textNormal {color: #1C9963 !important;}
                  .u-accentColor--hoverTextNormal:hover {color: #1C9963 !important;}
                  .u-accentColor--textNormal.u-accentColor--textDarken:hover {color: #1C9963 !important;}
                  .u-accentColor--textDark {color: #1C9963 !important;}
                  .u-accentColor--backgroundLight {background-color: #02B875 !important;}
                  .u-accentColor--backgroundNormal {background-color: #02B875 !important;}
                  .u-accentColor--backgroundDark {background-color: #1C9963 !important;}
                  .u-accentColor--buttonDark {border-color: #1C9963 !important; color: #1C9963 !important;}
                  .u-accentColor--buttonDark:hover {border-color: #1C9963 !important;}
                  .u-accentColor--buttonDark .icon:before,.u-accentColor--buttonDark .svgIcon{color: #1C9963 !important; fill: #1C9963 !important;}
                  .u-accentColor--buttonNormal:not(.clapButton--largePill) {border-color: #02B875 !important; color: #1C9963 !important;}
                  .u-accentColor--buttonNormal:hover {border-color: #1C9963 !important;}
                  .u-accentColor--buttonNormal .icon:before,.u-accentColor--buttonNormal .svgIcon{color: #02B875 !important; fill: #02B875 !important;}
                  .u-accentColor--buttonNormal.button--filled .icon:before,.u-accentColor--buttonNormal.button--filled .svgIcon{color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
                  .u-accentColor--buttonDark.button--filled,.u-accentColor--buttonDark.button--withChrome.is-active,.u-accentColor--fillWhenActive.is-active {background-color: #1C9963 !important; border-color: #1C9963 !important; color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
                  .u-accentColor--buttonNormal.button--filled:not(.clapButton--largePill),.u-accentColor--buttonNormal.button--withChrome.is-active:not(.clapButton--largePill) {background-color: #02B875 !important; border-color: #02B875 !important; color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
                  .postArticle.is-withAccentColors .markup--user,.postArticle.is-withAccentColors .markup--query {color: #1C9963 !important;}
                  .u-accentColor--highlightFaint {background-color: rgba(233, 253, 240, 1) !important;}
                  .u-accentColor--highlightStrong.is-active .svgIcon {fill: rgba(125, 255, 179, 1) !important;}
                  .postArticle.is-withAccentColors .markup--quote.is-other {background-color: rgba(233, 253, 240, 1) !important;}
                  body.is-withMagicUnderlines .postArticle.is-withAccentColors .markup--quote.is-other {background-color: transparent !important; background-image: linear-gradient(to bottom, rgba(233, 253, 240, 1), rgba(233, 253, 240, 1));}
                  .postArticle.is-withAccentColors .markup--quote.is-me {background-color: rgba(173, 255, 207, 1) !important;}
                  body.is-withMagicUnderlines .postArticle.is-withAccentColors .markup--quote.is-me {background-color: transparent !important; background-image: linear-gradient(to bottom, rgba(173, 255, 207, 1), rgba(173, 255, 207, 1));}
                  .postArticle.is-withAccentColors .markup--quote.is-targeted {background-color: rgba(125, 255, 179, 1) !important;}
                  body.is-withMagicUnderlines .postArticle.is-withAccentColors .markup--quote.is-targeted {background-color: transparent !important; background-image: linear-gradient(to bottom, rgba(125, 255, 179, 1), rgba(125, 255, 179, 1));}
                  .postArticle.is-withAccentColors .markup--quote.is-selected {background-color: rgba(125, 255, 179, 1) !important;}
                  body.is-withMagicUnderlines .postArticle.is-withAccentColors .markup--quote.is-selected {background-color: transparent !important; background-image: linear-gradient(to bottom, rgba(125, 255, 179, 1), rgba(125, 255, 179, 1));}
                  .postArticle.is-withAccentColors .markup--highlight {background-color: rgba(125, 255, 179, 1) !important;}
                  body.is-withMagicUnderlines .postArticle.is-withAccentColors .markup--highlight {background-color: transparent !important; background-image: linear-gradient(to bottom, rgba(125, 25
